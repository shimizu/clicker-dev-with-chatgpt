var m=Object.defineProperty;var f=(n,e,t)=>e in n?m(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var i=(n,e,t)=>f(n,typeof e!="symbol"?e+"":e,t);import{P as c}from"./phaser-CssBqNdC.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();class S{constructor(e){i(this,"scene");this.scene=e}preload(){this.scene.load.image("logo","assets/images/logo.png"),this.scene.load.image("background","assets/images/background.png"),this.scene.load.image("target","assets/images/monster.png"),this.scene.load.image("eventImage","assets/images/gold.png"),this.scene.load.audio("clickSfx",["assets/sfx/hit.mp3","assets/sfx/hit.ogg"]),this.scene.load.audio("upgradeSfx",["assets/sfx/cool-thing.mp3","assets/sfx/cool-thing.ogg"]),this.scene.load.audio("eventSfx",["assets/sfx/Pickup-Coin.mp3","assets/sfx/Pickup-Coin.ogg"])}}class v extends c.Scene{constructor(){super({key:"BootScene"});i(this,"assetLoader")}preload(){this.assetLoader=new S(this),this.assetLoader.preload()}create(){console.log("boot"),this.scene.start("TitleScene")}}class y extends c.Scene{constructor(){super({key:"TitleScene"})}create(){const{width:e,height:t}=this.game.canvas;this.cameras.main.setBackgroundColor("#251d2d"),this.add.image(e/2,t/3,"logo").setScale(.5);const s={fontFamily:"BestTen-DOT",fontSize:"32px"},a=this.add.text(e/2,600,"Start",{...s,color:"#ffffff"}).setOrigin(.5).setInteractive();a.on("pointerdown",()=>{this.scene.start("GameScene")}),a.on("pointerdown",()=>{this.scene.start("GameScene")}),this.add.text(e/2,700,"Clear Save Data",{...s,color:"#ff0000"}).setOrigin(.5).setInteractive().on("pointerdown",()=>{localStorage.clear(),this.add.text(e/2,740,"Save Data Cleared!",{fontSize:"24px",color:"#ffffff"}).setOrigin(.5),console.log("Save data has been cleared.")})}}class x{constructor(){i(this,"points");i(this,"upgrades");i(this,"triggeredEvents");this.points=0,this.upgrades={autoClicker:{level:0,cost:20},fasterClicks:{level:0,cost:50},doublePoints:{level:0,cost:100}},this.triggeredEvents=new Set}addPoints(e){this.points+=e}deductPoints(e){this.points>=e&&(this.points-=e)}hasSufficientPoints(e){return this.points>=e}upgrade(e){const t=this.upgrades[e];t.level++,t.cost=Math.ceil(t.cost*1.5)}isEventTriggered(e){return this.triggeredEvents.has(e)}triggerEvent(e){this.triggeredEvents.add(e)}saveGame(){const e={points:this.points,upgrades:this.upgrades,triggeredEvents:Array.from(this.triggeredEvents)};localStorage.setItem("gameState",JSON.stringify(e))}loadGame(){const e=localStorage.getItem("gameState");if(e){const t=JSON.parse(e);this.points=t.points,this.upgrades=t.upgrades,this.triggeredEvents=new Set(t.triggeredEvents)}}}class C{constructor(e,t,o){i(this,"gameState");i(this,"scene");i(this,"upgradeSystem");this.gameState=e,this.scene=t,this.upgradeSystem=o}start(){this.scene.time.addEvent({delay:this.getClickInterval(),callback:this.autoClick,callbackScope:this,loop:!0})}autoClick(){let e=this.upgradeSystem.getUpgradeLevel("autoClicker");this.upgradeSystem.getUpgradeLevel("doublePoints")>0&&(e*=2),this.gameState.addPoints(e),this.scene.events.emit("autoClickCompleted",e)}getClickInterval(){return 1e3/(1+this.upgradeSystem.getUpgradeLevel("fasterClicks"))}}class T{constructor(e,t){i(this,"gameState");i(this,"scene");this.gameState=e,this.scene=t}getUpgradeInfo(e){return this.gameState.upgrades[e]}purchaseUpgrade(e){const t=this.gameState.upgrades[e];return this.gameState.hasSufficientPoints(t.cost)?(this.gameState.deductPoints(t.cost),t.level++,t.cost=Math.ceil(t.cost*1.5),this.scene.events.emit("upgradePurchased",e,t.level,t.cost),!0):!1}getUpgradeLevel(e){return this.gameState.upgrades[e].level}getUpgradeCost(e){return this.gameState.upgrades[e].cost}}class E{constructor(e){i(this,"gameState");i(this,"eventsData",[{points:10,id:"10_points",message:"You reached 10 points!",color:"#ee7800"},{points:50,id:"50_points",message:"50 points! Great Job!",color:"#ee7800"},{points:100,id:"100_points",message:"Amazing! 100 points reached!",color:"#ee7800"},{points:250,id:"250_points",message:"Amazing! 250 points reached!",color:"#ee7800"},{points:500,id:"500_points",message:"Amazing! 500 points reached!",color:"#ee7800"},{points:1e3,id:"1000_points",message:"Amazing! 1000 points reached!",color:"#ee7800"}]);this.gameState=e}checkEvents(){const e=[];return this.eventsData.forEach(t=>{this.gameState.points>=t.points&&!this.gameState.triggeredEvents.has(t.id)&&(this.gameState.triggeredEvents.add(t.id),e.push(this.createEvent(t.id,t.message,t.color)))}),e}createEvent(e,t,o){return{id:e,message:t,color:o}}}class g{static updatePointsText(e,t){e.setText(`Points: ${t.points}`)}static updateUpgradeButton(e,t,o){const s=o.getUpgradeInfo(t),a=`Upgrade ${t}
(Lv ${s.level})
Cost: ${s.cost}`;e.setText(a)}}class p{static applyClickEffect(e,t){e.sound.play("clickSfx"),e.tweens.isTweening(t)||e.tweens.add({targets:t,scaleX:.9,scaleY:.9,duration:1,yoyo:!0,ease:"Power1"})}}const l={fontStyle:{fontSize:"32px",fontFamily:"BestTen-DOT",color:"#ffffff"},smallFontStyle:{fontSize:"24px",fontFamily:"BestTen-DOT",color:"#ffffff"},pointFontStyle:{fontSize:"32px",fontFamily:"BestTen-DOT",color:"#ffffff"},evnetFontStyle:{fontSize:"28px",fontFamily:"BestTen-DOT"},upgradeFontStyle:{fontSize:"22px",fontFamily:"BestTen-DOT",color:"#ffffff"}};class h{static displayEventImage(e,t,o){const{width:s,height:a}=e.game.canvas;setTimeout(()=>{e.sound.play("eventSfx");const r=e.add.image(s/2,0,t);r.setOrigin(.5),r.setScale(1),r.setAlpha(0),e.tweens.add({targets:r,y:a/2,alpha:1,duration:500,ease:"Bounce.easeOut",onComplete:()=>{e.tweens.add({targets:r,alpha:0,duration:250,delay:500,onComplete:()=>{r.destroy()}})}})},o)}static showNotification(e,t,o){const s=e.add.text(240,100,t,{...l.evnetFontStyle,color:o}).setOrigin(.5);e.time.delayedCall(3e3,()=>{e.tweens.add({targets:s,alpha:0,duration:1e3,onComplete:()=>{s.destroy()}})})}}class k{static applyUpgradeEffect(e){e.sound.play("upgradeSfx")}}class P extends c.Scene{constructor(){super({key:"GameScene"});i(this,"gameState");i(this,"autoClickSystem");i(this,"upgradeSystem");i(this,"eventSystem");i(this,"pointsText");i(this,"upgradeButtons",{});this.gameState=new x,this.upgradeSystem=new T(this.gameState,this),this.eventSystem=new E(this.gameState),this.autoClickSystem=new C(this.gameState,this,this.upgradeSystem)}create(){this.gameState.loadGame(),console.log(this.gameState);const{width:t,height:o}=this.game.canvas,s=this.add.image(t/2,320,"background");s.setOrigin(.5),s.setDisplaySize(t,o/2);const a=this.add.image(t/2,300,"target").setInteractive();a.setScale(1),a.on("pointerdown",()=>{p.applyClickEffect(this,a),this.gameState.addPoints(1+this.gameState.upgrades.doublePoints.level),g.updatePointsText(this.pointsText,this.gameState)}),this.pointsText=this.add.text(240,40,`Points: ${this.gameState.points}`,l.pointFontStyle).setOrigin(.5),this.createUpgradeButton("autoClicker",100,600),this.createUpgradeButton("fasterClicks",240,600),this.createUpgradeButton("doublePoints",400,600),this.events.on("upgradePurchased",(r,d,u)=>{this.updateUpgradeButton(r,d,u),g.updatePointsText(this.pointsText,this.gameState),k.applyUpgradeEffect(this)}),this.autoClickSystem.start(),this.events.on("autoClickCompleted",()=>{this.gameState.upgrades.autoClicker.level>0&&p.applyClickEffect(this,a),g.updatePointsText(this.pointsText,this.gameState)})}update(){this.gameState.saveGame(),this.eventSystem.checkEvents().forEach(o=>{console.log(this.gameState.triggeredEvents.size),h.showNotification(this,o.message,o.color);for(let s=0;s<this.gameState.triggeredEvents.size;s++)h.displayEventImage(this,"eventImage",s*100)})}updateUpgradeButton(t,o,s){const a=`${t}
(Lv ${o})
Cost: ${s}`;this.upgradeButtons[t].setText(a)}createUpgradeButton(t,o,s){const a=this.upgradeSystem.getUpgradeInfo(t),r=`${t}
(Lv ${a.level})
Cost: ${a.cost}`,d=this.add.text(o,s,r,l.upgradeFontStyle).setOrigin(.5).setInteractive().on("pointerdown",()=>{this.upgradeSystem.purchaseUpgrade(t)?g.updatePointsText(this.pointsText,this.gameState):console.log(`Not enough points to upgrade ${t}.`)});this.upgradeButtons[t]=d}}const w={type:c.AUTO,width:480,height:800,scale:{mode:c.Scale.FIT,autoCenter:c.Scale.CENTER_BOTH},parent:"game-app",scene:[v,y,P]};new c.Game(w);
